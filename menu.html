<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <title>Amerta Restaurant</title>

  <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
  <link href="https://fonts.googleapis.com/css?family=Poppins:400,600,700&display=swap" rel="stylesheet">
  <link href="css/font-awesome.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/css/nice-select.min.css" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.css" crossorigin="anonymous" />
  <link href="css/style.css" rel="stylesheet" />
  <link href="css/responsive.css" rel="stylesheet" />
  <style>
    .add-to-cart i {
      color: white !important;
    }
  </style>
</head>

<body class="sub_page">
  <div class="hero_area">
    <header class="header_section">
      <div class="container-fluid">
        <nav class="navbar navbar-expand-lg custom_nav-container">
          <a class="navbar-brand" href="index.html">
            <span>Amerta Restaurant</span>
          </a>
          <div class="">
            <div class="User_option">
              <a href=""><i class="fa fa-user"></i><span>Login</span></a>
              <form class="form-inline">
                <button class="btn nav_cart-btn" type="button">
                  <i class="fa fa-shopping-cart"></i>
                </button>
              </form>
            </div>
            <div class="custom_menu-btn">
              <button onclick="openNav()">
                <img src="images/menu.png" alt="">
              </button>
            </div>
            <div id="myNav" class="overlay">
              <div class="overlay-content">
                <a href="index.html">Beranda</a>
                <a href="menu.html">Menu</a>
                <a href="blog.html">Berita Terkini</a>
                <a href="testimonial.html">Cerita Mereka di Amerta</a>
              </div>
            </div>
          </div>
        </nav>
      </div>
    </header>
  </div>

  <section class="food_section layout_padding">
    <div class="container">
      <div class="heading_container heading_center">
        <h2>Menu Amerta</h2>
      </div>

      <ul class="filters_menu">
        <li class="active" data-filter="*">All</li>
        <li data-filter=".nasi">Nasi</li>
        <li data-filter=".sup">Sup Kuah</li>
        <li data-filter=".penutup">Penutup</li>
        <li data-filter=".minum">Minum</li>
      </ul>

      <div class="row filters-content" id="menu-list"></div>
    </div>
  </section>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getDatabase, ref, get, child } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyB7ikwR3R-1W99pIZeg9B6yEYBLDBuHOrc",
      authDomain: "amertaresto-6f7e6.firebaseapp.com",
      databaseURL: "https://amertaresto-6f7e6-default-rtdb.firebaseio.com",
      projectId: "amertaresto-6f7e6",
      storageBucket: "amertaresto-6f7e6.firebasestorage.app",
      messagingSenderId: "1037291139779",
      appId: "1:1037291139779:web:33a9e59f4503ad51516876",
      measurementId: "G-T5TTGJLR9Z"
    };

    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);
    const menuList = document.getElementById("menu-list");
    const dbRef = ref(database);

    get(child(dbRef, 'menu')).then((snapshot) => {
      if (snapshot.exists()) {
        const data = snapshot.val();
        let html = '';

        for (let id in data) {
          const item = data[id];
          html += `
            <div class="col-sm-6 col-lg-4 all ${item.kategori.toLowerCase()} menu-item">
              <div class="box">
                <div class="img-box">
                  <img src="${item.gambar}" alt="${item.nama}">
                </div>
                <div class="detail-box">
                  <h5>${item.nama}</h5>
                  <p>${item.deskripsi}</p>
                  <div class="options">
                    <h6>Rp ${item.harga.toLocaleString()}</h6>
                    <a href="cart.html" class="add-to-cart" data-nama="${item.nama}" data-harga="${item.harga}" data-gambar="${item.gambar}">
                      <i class="fa fa-shopping-cart"></i>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          `;
        }

        menuList.innerHTML = html;
      } else {
        console.log("Tidak ada data menu.");
      }
    }).catch((error) => {
      console.error("Gagal ambil data: ", error);
    });

    document.addEventListener("DOMContentLoaded", function () {
      const filterButtons = document.querySelectorAll(".filters_menu li");

      filterButtons.forEach(button => {
        button.addEventListener("click", () => {
          filterButtons.forEach(btn => btn.classList.remove("active"));
          button.classList.add("active");

          const filter = button.getAttribute("data-filter").replace(".", "");

          document.querySelectorAll("#menu-list > div").forEach(card => {
            if (filter === "*" || card.classList.contains(filter)) {
              card.style.display = "";
            } else {
              card.style.display = "none";
            }
          });
        });
      });
    });
  </script>
</body>
</html>
